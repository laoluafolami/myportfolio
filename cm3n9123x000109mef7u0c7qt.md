---
title: "Launch an E-commerce site Using LEMP Stack and AWS: A Beginner's Tutorial"
seoTitle: "Build E-commerce Site with LEMP and AWS"
seoDescription: "Learn to set up an e-commerce site using LEMP stack and AWS, including installation, configuration, and benefits. Ideal for beginners"
datePublished: Mon Nov 18 2024 16:37:25 GMT+0000 (Coordinated Universal Time)
cuid: cm3n9123x000109mef7u0c7qt
slug: launch-an-e-commerce-site-using-lemp-stack-and-aws-a-beginners-tutorial
cover: https://cdn.hashnode.com/res/hashnode/image/upload/v1731947586122/99e6eae9-17e1-4996-b4ca-5a067276ef0c.png
ogImage: https://cdn.hashnode.com/res/hashnode/image/upload/v1731947720590/38d4baa1-a19f-47e4-be05-481af1bf4373.png
tags: ubuntu, linux, nginx, php, lemp-stack-project

---

The **LEMP stack** is a collection of open-source software used for hosting web applications and websites. The acronym "LEMP" stands for the following components:

1. **L** - **Linux**: The operating system. It provides the foundation for the stack, typically a Linux distribution like Ubuntu, CentOS, or Debian.
    
2. **E** - **NGINX (Engine-X)**: The web server. NGINX is responsible for serving web pages, handling client requests, and serving static content (e.g., HTML, CSS, JavaScript) as well as acting as a reverse proxy for dynamic content generated by PHP.
    
3. **M** - **MySQL/MariaDB**: The database server. MySQL or its fork MariaDB is used for managing relational databases, storing application data such as user information, product details, and other dynamic content for the web application.
    
4. **P** - **PHP**: The programming language. PHP (Hypertext Preprocessor) is a server-side scripting language used to develop dynamic web applications, process form data, interact with databases, and generate HTML content dynamically.
    

### How the LEMP Stack Works:

* **Linux** serves as the operating system where all the software runs.
    
* **NGINX** (pronounced "Engine-X") is the web server that handles HTTP requests from clients (users accessing the site). It is known for its high performance and scalability. NGINX serves static files directly and sends dynamic requests (PHP files) to the PHP processor.
    
* **MySQL or MariaDB** stores data for your web applications. For example, it might store user profiles, product information, order details, etc.
    
* **PHP** processes dynamic content. It interacts with the database (MySQL/MariaDB) to fetch or store data and then generates dynamic HTML content that is sent back to the client via NGINX.
    

### Why Use LEMP Stack?

* **Lightweight and Fast**: NGINX is known for being lightweight and able to handle a large number of concurrent connections efficiently, making it ideal for high-traffic sites.
    
* **Flexibility**: It can be used to run a variety of web applications, including content management systems (CMSs), e-commerce websites, and custom-built applications.
    
* **Open Source**: All components in the LEMP stack are open-source, meaning they are free to use, and there's a large community of developers and administrators contributing to their development and maintenance.
    
* **Scalability**: The stack is designed to handle traffic spikes, and it's easy to scale by adding more servers or using cloud-based infrastructure like AWS, Google Cloud, or Azure.
    
    In this step-by-step guide, weâ€™ll build a beginner-friendly e-commerce platform hosted on AWS. This project will focus on key features such as **product categorisation**, a **shopping cart**, and **order management**. We'll enhance its look using a CSS stylesheet.
    

### **Step 1: Launch an AWS EC2 Instance**

* **Login to AWS**: Go to the AWS Management Console.
    
* **Launch an EC2 Instance**:
    
    ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731725529312/7ed17754-9e89-4bb3-80b5-b378474f00e1.png align="center")
    
    ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731725579214/3e95315c-6f7f-4aa6-bf5d-a7e29b0634fa.png align="center")
    
    * Select the **Ubuntu Server 22.04 LTS** AMI.
        
        ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731725705224/39ed7d53-4935-4487-a5a8-26c7ff015dc1.png align="left")
        
* Choose an instance type (e.g., `t2.micro` for free-tier users).
    
    ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731725866325/45656114-3a08-4696-b487-fdb243e26783.png align="center")
    
* Create a key pair login:
    
    ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731725957054/2fb46e6b-5846-406f-a0bd-fdaa96a5f6b3.png align="center")
    
    ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731726028320/c1680189-6eb7-4066-9a38-71de2d5ec553.png align="center")
    
    * Configure security groups:
        
    * Allow **HTTP (port 80)**, and **SSH (port 22)**.
        
        ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731726123712/7ed015aa-f77a-4374-b478-d467502ef96b.png align="center")
        
        ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731726182311/621a9c6c-6f79-4862-8a08-91c3d0dd993c.png align="center")
        
* Launch the instance and connect via SSH:
    
    ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731726276846/d967bedb-f45d-45b3-9f78-a87961b5837d.png align="center")
    
    Select your EC2 instance and click on `Connect`.
    
    ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731726401326/ea08d39b-d53f-4192-b2ce-dcb4a3e3bf26.png align="center")
    
* Connect to your instance using the public IP. Open any terminal of your choice, copy the public DNS as indicated below and initiate an SSH connection.
    
* ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731726546327/472c5a2a-23d5-485f-9c69-2172c43d0525.png align="center")
    
* ```bash
    ssh -i "your-key.pem" ubuntu@ec2-public-ip
    ```
    
    (ssh -i "my-lemp-key.pem" ubuntu@3.93.191.73)
    
* ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731727308785/2d56ae28-eb5d-4fc1-9915-f0dcbd2483f8.png align="center")
    
    ### **Step 2: Install the LEMP Stack**
    
    **From your Linux terminal, copy and paste the commands indicated below:**
    
    1. **Update the System**:
        
        ```bash
        sudo apt update && sudo apt upgrade -y
        ```
        
    
    ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731727643027/027caddf-19df-4267-ab7b-89ea772afa1a.png align="center")
    
    1. **Install Nginx**:
        
        ```bash
        sudo apt install nginx -y
        sudo systemctl start nginx
        ```
        
    2. **Install MySQL**:
        
        ```bash
        sudo apt install mysql-server -y
        sudo mysql_secure_installation
        ```
        
        ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731727857376/537febd4-8e74-4eea-b40c-1207c9a134d1.png align="center")
        
        ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731728002032/1fd497c3-9601-4427-9cfe-d962300beb02.png align="center")
        
        Follow the prompt to set a password.
        
    3. **Install PHP**:
        
        ```bash
        sudo apt install php-fpm php-mysql -y
        ```
        
        ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731728171791/15658dcc-a577-4e61-b00d-4a70eb5d9bef.png align="center")
        
    4. **Configure Nginx for PHP**:
        
        * Edit the Nginx default site configuration:
            
            ```bash
            sudo nano /etc/nginx/sites-available/default
            ```
            
        * Update the `server` block:
            
            ```nginx
            server {
                listen 80;
                server_name your-domain.com; # Replace with your domain or public IP
            
                root /var/www/ecommerce;
                index index.php index.html index.htm;
            
                location / {
                    try_files $uri $uri/ /index.php?$query_string;
                }
            
                location ~ \.php$ {
                    include snippets/fastcgi-php.conf;
                    fastcgi_pass unix:/var/run/php/php8.3-fpm.sock; # Adjust PHP version if needed
                    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                    include fastcgi_params;
                }
            
                location ~ /\.ht {
                    deny all;
                }
            }
            
            ```
            
        * Restart Nginx:
            
            ```bash
            sudo nginx -t
            sudo systemctl restart nginx
            ```
            
            ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731729514577/ae05a4ab-6cb7-47cd-bce3-ca7999528acf.png align="center")
            
            1. `sudo nginx -t` checks to see if the syntax is correct.
                
        
        1. `sudo systemctl restart nginx` restarts the nginx server.
            
            ### **Step 3: Set Up the Database**
            
            1. Login to MySQL
                
                ```bash
                sudo mysql -u root -p
                ```
                
                ![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731729950742/61dc5589-12d6-4f49-9694-bff8368509e3.png align="left")
                
                2. **Create a Database and User**:
                    
                    ```sql
                    sudo mysql -u root -p
                    CREATE DATABASE ecommerce_db;
                    CREATE USER 'ecommerce_user'@'localhost' IDENTIFIED BY 'secure_password';
                    GRANT ALL PRIVILEGES ON ecommerce_db.* TO 'ecommerce_user'@'localhost';
                    FLUSH PRIVILEGES;
                    EXIT;
                    ```
                    
            
            1. **Create Tables**:
                
                * ```sql
                    USE ecommerce_db;
                    
                    CREATE TABLE categories (
                        id INT AUTO_INCREMENT PRIMARY KEY,
                        name VARCHAR(255) NOT NULL
                    );
                    
                    CREATE TABLE products (
                        id INT AUTO_INCREMENT PRIMARY KEY,
                        name VARCHAR(255) NOT NULL,
                        description TEXT,
                        price DECIMAL(10, 2) NOT NULL,
                        category_id INT,
                        FOREIGN KEY (category_id) REFERENCES categories(id)
                    );
                    
                    CREATE TABLE orders (
                        id INT AUTO_INCREMENT PRIMARY KEY,
                        total_amount DECIMAL(10, 2) NOT NULL,
                        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                    );
                    ```
                    
            2. Type `exit` to return to the Linux terminal.
                
            
            ---
            
            ### **Step 4: Setup the Project Structure**
            
            1. Create the following directories:
                
                ```bash
                sudo mkdir -p /var/www/ecommerce
                cd /var/www/ecommerce
                ```
                
            2. **Setup your project structure in the format below**:
                
                ```css
                ecommerce/
                â”œâ”€â”€ index.php
                â”œâ”€â”€ product.php
                â”œâ”€â”€ cart.php
                â”œâ”€â”€ checkout.php
                â”œâ”€â”€ config.php
                â”œâ”€â”€ css/
                â”‚   â””â”€â”€ style.css
                â”œâ”€â”€ includes/
                â”‚   â”œâ”€â”€ header.php
                â”‚   â”œâ”€â”€ footer.php
                â”‚   â””â”€â”€ functions.php
                ```
                
            
            ## **Step 5: Write the PHP Code**
            
            1. **Create a file using the** `nano` **command**
                
            
            **Product Listing (**`index.php`)
            
            ```bash
            sudo nano index.php
            ```
            
            ```php
            <?php
            // index.php
            require 'config.php';
            require 'includes/functions.php';
            
            $products = getProducts();
            
            include 'includes/header.php';
            ?>
            
            <h1>Product Catalog</h1>
            <div class="products">
                <?php foreach ($products as $product): ?>
                    <div class="product">
                        <h3><?= htmlspecialchars($product['name']) ?></h3>
                        <p><?= htmlspecialchars($product['description']) ?></p>
                        <p>$<?= htmlspecialchars($product['price']) ?></p>
                        <a href="add_to_cart.php?id=<?= $product['id'] ?>">Add to Cart</a>
                    </div>
                <?php endforeach; ?>
            </div>
            
            <?php include 'includes/footer.php'; ?>
            ```
            
        2. #### **Database Connection (**`config.php`)
            
    5. ```bash
        sudo nano config.php
        ```
        
        ```php
        <?php
        $host = 'localhost';
        $db = 'ecommerce_db';
        $user = 'ecommerce_user';
        $pass = 'secure_password';
        
        try {
            $pdo = new PDO("mysql:host=$host;dbname=$db", $user, $pass);
            $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch (PDOException $e) {
            die("Database connection failed: " . $e->getMessage());
        }
        ?>
        ```
        
        ### Step 6: Add the CSS Styles
        
        Create a directory for the CSS files
        
        ```bash
        sudo mkdir css
        ```
        
        Create a file using the nano command and paste the CSS.
        
        ```bash
        sudo nano style.css
        ```
        
        **Stylesheet** (`css/style.css`)C
        
        ```css
        body { font-family: Arial, sans-serif; background-color: #f8f9fa; color: #333; }
        .products { display: flex; gap: 20px; flex-wrap: wrap; }
        .product { border: 1px solid #ddd; padding: 10px; width: 30%; }
        .product a { display: block; text-decoration: none; color: #007bff; }
        header, footer { background-color: #343a40; color: #fff; text-align: center; padding: 10px; 
        ```
        
    
    Create another directory `includes` to store the functions files
    

```bash
sudo mkdir includes
```

```bash
sudo nano functions.php
```

```php
<?php
function getProducts($category_id = null) {
    global $pdo;
    $query = 'SELECT * FROM products';
    if ($category_id) $query .= ' WHERE category_id = :category_id';
    $stmt = $pdo->prepare($query);
    $stmt->execute($category_id ? ['category_id' => $category_id] : []);
    return $stmt->fetchAll(PDO::FETCH_ASSOC);
}

function addToCart($product_id, $quantity) {
    if (!isset($_SESSION['cart'])) $_SESSION['cart'] = [];
    $_SESSION['cart'][$product_id] = $quantity;
}

function calculateCartTotal() {
    global $pdo;
    $total = 0;
    foreach ($_SESSION['cart'] as $product_id => $quantity) {
        $stmt = $pdo->prepare('SELECT price FROM products WHERE id = :id');
        $stmt->execute(['id' => $product_id]);
        $product = $stmt->fetch(PDO::FETCH_ASSOC);
        $total += $product['price'] * $quantity;
    }
    return $total;
}
?>
```

### **Step 7: Test Your Application**

1. Access the application via your EC2 public IP :
    
    ```bash
    http://<your-ec2-public-ip>
    ```
    
    [http://52.20.195.149/](http://52.20.195.149/)
    

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1731927652990/2fcc4779-1950-4ac7-a61e-ffa27e594ad8.png align="center")

### LEMP vs LAMP Stack

The **LAMP stack** is similar to LEMP but uses **Apache** as the web server instead of NGINX. While both stacks are widely used, NGINX (LEMP) is preferred for high-performance sites that require fast handling of concurrent requests, while Apache (LAMP) is known for its flexibility and easier configuration for many use cases.

In summary, LEMP is a powerful, high-performance stack suitable for modern web applications.